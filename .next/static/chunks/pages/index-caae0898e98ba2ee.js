(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5269)}])},5269:function(n,e,t){"use strict";function r(n,e,t,r,i,u,o){try{var c=n[u](o),s=c.value}catch(a){return void t(a)}c.done?e(s):Promise.resolve(s).then(r,i)}function i(n){return function(){var e=this,t=arguments;return new Promise((function(i,u){var o=n.apply(e,t);function c(n){r(o,i,u,c,s,"next",n)}function s(n){r(o,i,u,c,s,"throw",n)}c(void 0)}))}}t.r(e),t.d(e,{default:function(){return f}});var u=t(7582),o=t(5893),c=t(7294),s=t(9008),a=t.n(s),l=function(n){for(var e=(n+"=".repeat((4-n.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),t=window.atob(e),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r},f=function(){var n=(0,c.useState)(!1),e=(n[0],n[1]),t=(0,c.useState)(null),r=t[0],s=t[1],f=(0,c.useState)(null),h=f[0],p=f[1];(0,c.useEffect)((function(){"serviceWorker"in navigator&&void 0!==window.workbox&&navigator.serviceWorker.ready.then((function(n){n.pushManager.getSubscription().then((function(n){!n||n.expirationTime&&Date.now()>n.expirationTime-3e5||(s(n),e(!0))})),p(n)}))}),[]);var b=function(){var n=i((function(n){var t;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n.preventDefault(),[4,h.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l("BAwMFwBVpWNxSWLK636J4MUAtWTmXzXfoerCJoDbn8JpjxU8vBuzXxjtCi2lxblAAdkKBbNwLkyE_glzr_H554U")})];case 1:return t=r.sent(),s(t),e(!0),console.log("web push subscribed!"),console.log(t),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),v=function(){var n=i((function(n){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return n.preventDefault(),[4,r.unsubscribe()];case 1:return t.sent(),s(null),e(!1),console.log("web push unsubscribed!"),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),d=function(){var n=i((function(n){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return n.preventDefault(),[4,fetch("/api/notification",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:r})})];case 1:return e.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a(),{children:(0,o.jsx)("title",{children:"next-pwa example"})}),(0,o.jsx)("h1",{children:"Next.js + PWA = AWESOME!"}),(0,o.jsx)("button",{onClick:b,children:"Subscribe"}),(0,o.jsx)("button",{onClick:v,children:"Unsubscribe"}),(0,o.jsx)("button",{onClick:d,children:"Send Notification"})]})}},9008:function(n,e,t){n.exports=t(5443)}},function(n){n.O(0,[774,888,179],(function(){return e=5557,n(n.s=e);var e}));var e=n.O();_N_E=e}]);